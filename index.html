<!DOCTYPE html>
<html>
<head>
  <title>Teacher Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <h2>Pickup Requests</h2>
  <div id="requests"></div>
</div>

<script>

const url = "https://script.google.com/macros/s/AKfycbxzQLylcKsySXdrlLKQ7jygMvyhKfrT_z17Y3gUYMQgK_hkr1ucf3iwU8SPklX9XcQ-hw/exec";

fetch(url)
.then(response => response.json())
.then(data => {

  let output = "";

  data.forEach(item => {

    if(item.status === "Waiting"){

      output += `
        <div class="card">
          <p><strong>${item.child}</strong></p>
          <p>Parent: ${item.parent}</p>
          <p>Class: ${item.className}</p>
          <p>Status: ${item.status}</p>
          <button onclick="markPicked(${item.row})">
            Mark as Picked
          </button>
        </div>
      `;
    }

  });

  document.getElementById("requests").innerHTML = output;

});
  function markPicked(row){

  const formData = new FormData();
  formData.append("action", "markPicked");
  formData.append("row", row);

  fetch(url, {
    method: "POST",
    body: formData,
    mode: "no-cors"
  });

  alert("Marked as Picked");
  location.reload();
}


</script>

</body>
</html>
